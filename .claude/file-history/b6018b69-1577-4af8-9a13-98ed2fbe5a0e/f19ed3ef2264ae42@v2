require('dotenv').config();
const { ethers } = require('ethers');

const networks = {
  ethereum: {
    rpcUrl: process.env.ETHEREUM_RPC_URL || 'https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY',
    chainId: 1,
    name: 'Ethereum Mainnet'
  },
  sepolia: {
    rpcUrl: process.env.SEPOLIA_RPC_URL || 'https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY',
    chainId: 11155111,
    name: 'Sepolia Testnet'
  },
  bsc: {
    rpcUrl: 'https://bsc-dataseed.binance.org/',
    chainId: 56,
    name: 'BSC Mainnet'
  },
  polygon: {
    rpcUrl: 'https://polygon-rpc.com/',
    chainId: 137,
    name: 'Polygon Mainnet'
  },
  localhost: {
    rpcUrl: 'http://127.0.0.1:8545',
    chainId: 1337,
    name: 'Localhost'
  }
};

const currentNetwork = process.env.NETWORK || 'localhost';
const networkConfig = networks[currentNetwork];

if (!networkConfig) {
  throw new Error(`Network ${currentNetwork} not supported`);
}

// Create provider
const provider = new ethers.JsonRpcProvider(networkConfig.rpcUrl);

// Contract addresses (set via environment variables)
const contractAddresses = {
  savingsAccount: process.env.SAVINGS_ACCOUNT_ADDRESS || ''
};

// Contract ABIs
const savingsAccountABI = require('../abis/BancafiSavingsAccount.json');

module.exports = {
  provider,
  networkConfig,
  contractAddresses,
  savingsAccountABI,
  networks
};
